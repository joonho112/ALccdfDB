% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/linkage-programs-staff.R
\name{linkage_programs_staff}
\alias{linkage_programs_staff}
\title{Link programs to staff data}
\usage{
linkage_programs_staff(program_obj, staff_obj, verbose = TRUE)
}
\arguments{
\item{program_obj}{A program-module S3 object (e.g.,
\code{alccdf_program_unified}, \code{alccdf_program_deduped},
\code{alccdf_program_clean}) containing \code{facility_name}}

\item{staff_obj}{A staff-module S3 object (e.g.,
\code{alccdf_staff_clean}) containing \code{facility_name}}

\item{verbose}{Logical; print progress messages? Default TRUE.}
}
\value{
An \code{alccdf_linked_programs_staff} S3 object with:
\describe{
\item{data}{Program-level tibble with staff aggregates appended}
\item{meta}{Metadata including linkage key, match statistics}
\item{diagnostics}{Unmatched programs, unmatched staff records}
}
}
\description{
Performs a LEFT JOIN of staff data onto program data by matching
\code{facility_name} (case-insensitive, whitespace-trimmed). Computes
per-program aggregates: number of staff and career lattice level
distribution.
}
\details{
Staff data uses "Facility Name" (mapped to \code{facility_name}) which
matches the \code{facility_name} column in program data. Matching is
case-insensitive and whitespace-trimmed to handle minor inconsistencies.

The linkage pipeline:
\enumerate{
\item Extract data from both objects
\item Create normalised facility name keys in both datasets
\item Aggregate staff data to the facility name level
\item LEFT JOIN aggregated staff onto programs by normalised name
\item Compute match diagnostics
\item Build S3 object
}
}
\examples{
\dontrun{
linked <- linkage_programs_staff(program_obj, staff_obj)
alccdf_data(linked)
linked$diagnostics$unmatched_staff
}

}
