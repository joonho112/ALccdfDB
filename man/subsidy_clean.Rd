% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/subsidy-clean.R
\name{subsidy_clean}
\alias{subsidy_clean}
\title{Clean raw subsidy data}
\usage{
subsidy_clean(raw_obj, verbose = TRUE)
}
\arguments{
\item{raw_obj}{An \code{alccdf_subsidy_raw} object from
\code{\link{subsidy_read}}}

\item{verbose}{Logical; print progress messages? Default TRUE.}
}
\value{
An \code{alccdf_subsidy_clean} S3 object with:
\describe{
\item{data}{Main data tibble with PII fields removed and random IDs added}
\item{pii}{PII lookup table linking random IDs to names/SSNs}
\item{meta}{Metadata including cleaning steps}
}
}
\description{
Applies a comprehensive cleaning pipeline to an \code{alccdf_subsidy_raw}
object. The most critical step is PII separation: parent and child names
and SSNs are extracted into a separate PII table, replaced by random IDs
in the main data.
}
\details{
The cleaning pipeline applies the following operations in order:
\enumerate{
\item \strong{PII Separation}: Generate random IDs for parent and child.
Move \code{parent_name}, \code{child_name}, \code{parent_ssn}, and
\code{child_ssn} into a separate PII table. Main data retains only the
random IDs.
\item \strong{Date Parsing}: Parse \code{parent_dob}, \code{child_dob},
\code{eligibility_begin_date}, \code{eligibility_end_date},
\code{placement_start_date}, \code{placement_end_date},
\code{placement_date} from character to Date.
\item \strong{Address Standardisation}: Standardise \code{family_address}
and \code{provider_address} using \code{.standardize_address()}.
\item \strong{Copayment Conversion}: Convert \code{copay_weekly} to numeric
(clients data only).
\item \strong{Age Conversion}: Convert \code{child_age} to numeric.
\item \strong{County Standardisation}: Title-case county names.
\item \strong{Snapshot Date}: Add \code{snapshot_date} column.
}
}
\examples{
\dontrun{
raw   <- subsidy_read("EnrolledChildren.xlsx", "enrolled",
                       as.Date("2025-06-11"))
clean <- subsidy_clean(raw)
clean$pii  # PII lookup table
}

}
