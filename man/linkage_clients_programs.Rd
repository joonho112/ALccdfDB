% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/linkage-clients-programs.R
\name{linkage_clients_programs}
\alias{linkage_clients_programs}
\title{Link subsidy clients to program data}
\usage{
linkage_clients_programs(clients_obj, program_obj, verbose = TRUE)
}
\arguments{
\item{clients_obj}{A subsidy-module S3 object with \code{subsidy_type =
"clients"} (e.g., \code{alccdf_subsidy_clean})}

\item{program_obj}{A program-module S3 object (e.g.,
\code{alccdf_program_unified}, \code{alccdf_program_deduped},
\code{alccdf_program_clean}) containing \code{provider_id}}

\item{verbose}{Logical; print progress messages? Default TRUE.}
}
\value{
An \code{alccdf_linked_clients_programs} S3 object with:
\describe{
\item{data}{Client-level tibble with program columns appended}
\item{meta}{Metadata including linkage key, match statistics}
\item{diagnostics}{Unmatched clients, unmatched programs}
}
}
\description{
Performs a LEFT JOIN of program data onto subsidy client data by
\code{provider_id}, preserving all individual client rows. Each client row
receives program-level columns (e.g., \code{facility_type},
\code{latitude}, \code{longitude}, \code{county}, \code{facility_tier})
for spatial and analytic use.
}
\details{
This linkage is designed for spatial analysis comparing household locations
(from client \code{family_address}) against program locations (from program
\code{latitude}/\code{longitude}).

The linkage pipeline:
\enumerate{
\item Extract data from both objects
\item Select relevant program columns to append (avoiding name collisions)
\item LEFT JOIN program data onto clients by provider_id
\item Compute match diagnostics
\item Build S3 object
}

Clients without a matching program receive \code{NA} for all program
columns. All client rows are preserved.

Note: If a \code{provider_id} matches multiple programs, client rows will
be duplicated. The diagnostics report any such expansion.
}
\examples{
\dontrun{
linked <- linkage_clients_programs(clients_obj, program_obj)
alccdf_data(linked)
# Spatial analysis: household vs program coordinates
linked$data \%>\%
  dplyr::filter(!is.na(latitude)) \%>\%
  dplyr::select(family_address, provider_name, latitude, longitude)
}

}
